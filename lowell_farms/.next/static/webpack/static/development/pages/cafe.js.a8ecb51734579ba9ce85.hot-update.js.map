{"version":3,"file":"static/webpack/static/development/pages/cafe.js.a8ecb51734579ba9ce85.hot-update.js","sources":["webpack:///./components/Cafe.js"],"sourcesContent":["/* eslint-disable react/prop-types */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable react/destructuring-assignment */\nimport React, { Component } from 'react';\nimport Head from 'next/head';\nimport { RichText } from 'prismic-reactjs';\nimport { linkResolver } from '../lib/helpers';\nimport { Query } from 'react-apollo';\nimport Newsletter from './Newsletter';\nimport ButtonDark from './styles/ButtonDark';\nimport Accordion from './Accordion';\nimport KeyInfo from './KeyInfo';\nimport { CafeWrapper } from './styles/sections/cafeStyles';\nimport Link from 'next/link';\nimport { LazyLoadImage, LazyLoadComponent } from 'react-lazy-load-image-component';\n\n\nclass Cafe extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      success: false,\n      submitted: false\n    };\n  }\n\n  handleChange = e => {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n    if (value.length < 6) {\n    }\n  };\n\n\n  serializeFormData = (form) => {\n\n\t// Setup our serialized data\n\tvar serialized = [];\n\n\t// Loop through each field in the form\n\tfor (var i = 0; i < form.elements.length; i++) {\n\n\t\tvar field = form.elements[i];\n\n\t\t// Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\n\t\tif (!field.name || field.disabled || field.type === 'file' || field.type === 'reset' || field.type === 'submit' || field.type === 'button') continue;\n\n\n\n\t\t// If a multi-select, get all selections\n\t\tif (field.type === 'select-multiple') {\n\t\t\tfor (var n = 0; n < field.options.length; n++) {\n\t\t\t\tif (!field.options[n].selected) continue;\n\t\t\t\tserialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.options[n].value));\n\t\t\t}\n\t\t}\n\n\t\t// Convert field data to a query string\n\t\telse if ((field.type !== 'checkbox' && field.type !== 'radio') || field.checked) {\n      if (field.name == 'handle' && field.value != '') {\n        var handle = field.value.toLowerCase();\n        handle = 'https://www.instagram.com/' + handle;\n        serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(handle));\n      } else {\n        serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.value));\n\n      }\n\t\t}\n\t}\n\n\treturn serialized.join('&');\n\n\n  }\n\n  sendToGoogleSheets = e => {\n    e.preventDefault();\n\n    var self = this;\n    self.setState({ submitted: true });\n\n    var url = 'https://script.google.com/macros/s/AKfycbyN94WC1RQ0HW8CBPiSNL2zCDI4P_Fesn6UM0JxD7rQ9WkWKO7C/exec';\n    var params = this.serializeFormData(e.target);\n    console.log(params);\n\n    var http = new XMLHttpRequest();\n\n    http.open(\"GET\", url+\"?\"+params, true);\n    http.onreadystatechange = function()\n    {\n        if (http.readyState == 4 && http.status == 200) {\n            self.setState({ success: true })\n        } else {\n          self.setState({ submitted: false });\n        }\n    }\n    http.send(null);\n  };\n\n  render() {\n    const { pageData, cafePageData, newsletterData } = this.props;\n    //\n    var cafeTitleHtml =  cafePageData.page_title != '' && cafePageData.page_title != null &&  RichText.asText(cafePageData.page_title, linkResolver);\n    var titleHtml =  cafePageData.main_heading != '' && cafePageData.main_heading != null &&  RichText.asText(cafePageData.main_heading, linkResolver);\n    var subheadingHtml =  cafePageData.subheading != '' && cafePageData.subheading != null &&  RichText.asText(cafePageData.subheading, linkResolver);\n    var introTextHtml =  cafePageData.intro_text != '' && cafePageData.intro_text != null &&  RichText.render(cafePageData.intro_text, linkResolver);\n    var cafeButtonText =  cafePageData.lowell_cafe_button_text != '' && cafePageData.lowell_cafe_button_text != null &&  RichText.asText(cafePageData.lowell_cafe_button_text, linkResolver);\n    var reservationButtonText =  cafePageData.reservation_button_text != '' && cafePageData.reservation_button_text != null &&  RichText.asText(cafePageData.reservation_button_text, linkResolver);\n    var pressHeadingHtml =  cafePageData.press_heading != '' && cafePageData.press_heading != null &&  RichText.render(cafePageData.press_heading, linkResolver);\n    var lowell_cafe_link = cafePageData.lowell_cafe_link != '' && cafePageData.lowell_cafe_link != null && cafePageData.lowell_cafe_link.url;\n    var reservation_link = cafePageData.reservation_link != '' && cafePageData.reservation_link != null && cafePageData.reservation_link.url;\n    return (\n      <div>\n        <Head>\n          {pageData.meta_description != null && (\n            <title> {pageData.meta_title}</title>\n          )}\n          {pageData.meta_description != null && (\n            <meta name=\"description\" content={pageData.meta_description} />\n          )}\n          {pageData.keywords != null && (\n            <meta name=\"keywords\" content={pageData.keywords} />\n          )}\n          <link href=\"https://www.lowellherb.co/cafe\" rel=\"canonical\" />\n        </Head>\n\n\n        <CafeWrapper>\n\n          <header>\n          <LazyLoadImage src=\"static/collage/mobile/collage_2.png\" className=\"mobile-collage show-mobile\" effect=\"opacity\" visibleByDefault=\"true\"/>\n            <div class=\"container-sm collage-parent\">\n              <div class=\"collage-images\">\n              <LazyLoadImage src=\"static/collage/desktop/collage_1.png\" className=\"desktop-collage-1 hide-mobile\" effect=\"opacity\"/>\n              <LazyLoadImage src=\"static/collage/desktop/collage_2.png\" className=\"desktop-collage-2 hide-mobile\" effect=\"opacity\"/>\n              <LazyLoadImage src=\"static/collage/desktop/collage_3.png\" className=\"desktop-collage-3 hide-mobile\" effect=\"opacity\"/>\n              </div>\n              <div class=\"animation-wrapper\">\n                <h1>\n                  <LazyLoadImage src={cafePageData.cafe_logo.url != '' && cafePageData.cafe_logo.url}  effect=\"opacity\"/>\n                </h1>\n                <hr className=\"header-hr\"/>\n                <h2>{ titleHtml }</h2>\n                <h3>{ subheadingHtml }</h3>\n                <div className=\"intro-text\">\n                  { introTextHtml }\n                </div>\n              </div>\n            </div>\n          </header>\n          <section class=\"prohibition\">\n            <div class=\"container-xs collage-parent\">\n              <div class=\"collage-images\">\n              <LazyLoadImage src=\"static/collage/desktop/collage_4.png\" className=\"desktop-collage-1 hide-mobile\" effect=\"opacity\"/>\n              </div>\n              <a href={ lowell_cafe_link } className=\"button-light button\" >{ cafeButtonText }</a>\n              <a href={ reservation_link } className=\"button-light button\" >{ reservationButtonText }</a>\n\n            </div>\n          </section>\n\n          <div>\n            <KeyInfo pageData={pageData}/>\n          </div>\n          <section class=\"press\">\n            { pressHeadingHtml }\n            <div class=\"container\">\n              {pageData.press_items.map((value, index) => {\n                return (\n                  <a href={value.press_link.url} target=\"_blank\">\n                    <LazyLoadImage src={value.press_image.url} className=\"press-logo\" effect=\"opacity\"/>\n                  </a>\n                )\n              })}\n            </div>\n          </section>\n        </CafeWrapper>\n\n      </div>\n    );\n  }\n}\n\nexport default Cafe;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAQA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAdA;AAkBA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AAxDA;AA0DA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AA9EA;AACA;AACA;AAFA;AAFA;AAMA;AACA;;;AA0EA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AAAA;AAAA;AAGA;AAAA;AAAA;AAEA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAGA;AAAA;AAMA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAMA;AAAA;AAEA;AAAA;AAEA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAOA;;;;AAnKA;AACA;AAqKA;;;;A","sourceRoot":""}